{"version":3,"sources":["Globals.tsx","pages/SettingsPage.tsx","pages/WheelPage.tsx","components/Wheel.tsx","components/SelectionItemsModal.tsx","components/DecisionsModal.tsx","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","models/Settings.tsx","redux/reducers/setReducer.tsx","models/TmpSettings.tsx","redux/reducers/index.tsx","redux/reducers/tmpSetReducer.tsx","components/ShareTextModal.tsx","App.tsx","redux/store.tsx","serviceWorkerRegistration.ts","index.tsx","models/SelectionItem.tsx","models/Decision.tsx"],"names":["pwaUrl","process","log","a","localStorage","clear","consoleLog","console","bind","consoleError","error","Globals","bugReportApiUrl","storeFile","getLog","enableAppLog","Array","from","arguments","apply","disableAppLog","appSettings","fetchErrorContent","className","style","fontSize","paddingTop","href","target","updateApp","Promise","resolve","navigator","serviceWorker","getRegistrations","then","regs","all","map","reg","update","newReg","installing","waiting","hasUpdates","reduce","prev","curr","updateCssVars","settings","document","documentElement","cssText","uiFontSize","isTouchDevice","isPlatform","isStoreApps","clearAppData","copyToClipboard","text","clipboard","writeText","_SettingsPage","props","reportText","state","showBugReportAlert","showClearAlert","showToast","toastMessage","tabIndex","icon","bug","slot","checked","this","hasAppLog","onIonChange","e","isChecked","detail","dispatch","type","key","val","hidden","fill","shape","size","onClick","userAgent","PackageInfos","pwaVersion","JSON","stringify","setState","cssClass","backdropDismiss","isOpen","header","subHeader","inputs","name","placeholder","buttons","handler","value","test","name0","axiosInstance","axios","create","timeout","post","subject","productName","name1","role","download","flexDirection","textAlign","settingsJsonUri","encodeURIComponent","getItem","createElement","click","remove","id","accept","display","onChange","ev","file","files","item","fileText","parse","setItem","Error","stack","getElementById","querySelector","onDidPresent","colorPalette","theme","interface","interfaceOptions","min","max","pin","snaps","setImmediate","helpCircle","onDidDismiss","message","duration","React","Component","SettingsPage","withIonLifeCycle","connect","speechRate","bookmarks","voiceURI","mainVersion","tmpSettings","_WheelPage","spin","renderWheel","selectedItem","showDecisonsModal","decisions","length","selectedDecision","thisDecision","decision","title","selections","v","join","show","window","location","origin","pathname","shareSocial","flex","color","updateSelectedItem","result","setSpin","setRenderWheel","verticalAlign","width","marginTop","marginBottom","i","findIndex","d","uuid","showModal","finish","WheelPage","isLoadingData","padding","getRandomInt","Math","ceil","floor","random","_Wheel","wheel","addEventListener","d3","selectChild","chartBoundingClientRect","getBoundingClientRect","svgWidth","svgHeight","height","radius","svg","selectAll","data","attr","selectChildren","container","append","pie","sort","arc","innerRadius","outerRadius","arcs","enter","angle","startAngle","endAngle","PI","sqrt","piedegree","randomAssetIndex","randomPieMovement","rotation","spins","transition","attrTween","t","ease","on","Wheel","_SelectionItemsModal","bookmarkListRef","newDecision","showAddSelectionItemAlert","reorder","createRef","splice","event","complete","rows","forEach","push","button","clearInput","side","delBookmarkHandler","current","closeSlidingItems","swipeToClose","swapVertical","ref","disabled","onIonItemReorder","reorderBookmarks","getBookmarkRows","vertical","horizontal","SelectionItem","add","items","_DecisionsModal","decisionListRef","showAddDecisionAlert","showSelectionItemsModal","build","delDecisionHandler","reorderDecisions","getDecisionRows","Decision","uuidv4","SelectionItemsModal","history","match","webpackAsyncContext","req","__webpack_require__","o","code","ids","keys","Object","module","exports","Settings","version","updateUi","newSettings","body","classList","toggle","TmpSettings","shareTextModal","combineReducers","action","temp","idxToDel","b","prevIdx","defaultSettings","undefined","newState","_ShareTextModal","isAppSettingsExport","appSettingsString","filter","keyVal","appUrl","hasQueryString","qrcCanvas","qrcode","onWillPresent","updateQrCode","alignItems","flexGrow","flexShrink","margin","electronBackendApi","store","savedSettingsStr","createStore","reducer","getSavedStore","setupConfig","mode","swipeBackEnabled","serviceWorkCallbacks","onSuccess","registration","onUpdate","_App","AppOrig","_AppOrig","registrationNew","originalAppSettingsStr","queryParams","wakeLock","receive","send","queryString","search","split","setting","getState","showUpdateAlert","showRestoreAppSettingsToast","speechSynthesis","getVoices","cancel","wakeLockScreen","visibilityState","wakeLockScreenRelease","request","release","routeMatches","exec","queryMatches","route","decodeURIComponent","query","to","s","sel","newDecisionIndex","animated","path","render","exact","routeByQueryString","tab","pieChart","postMessage","ShareTextModal","restoreAppSettings","App","withRouter","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","register","onupdatefound","installingWorker","onstatechange","controller","catch","ReactDOM","URL","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","obj"],"mappings":"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","file":"static/js/main.be4c9057.chunk.js","sourcesContent":["import { isPlatform, IonLabel } from '@ionic/react';\n\nconst pwaUrl = process.env.PUBLIC_URL || '';\nconst bugReportApiUrl = 'https://vh6ud1o56g.execute-api.ap-northeast-1.amazonaws.com/bugReportMailer';\n\nlet log = '';\n\nasync function clearAppData() {\n  localStorage.clear();\n}\n\n//const electronBackendApi: any = (window as any).electronBackendApi;\n\nconst consoleLog = console.log.bind(console);\nconst consoleError = console.error.bind(console);\n\nfunction getLog() {\n  return log;\n}\n\nfunction enableAppLog() {\n  console.log = function () {\n    log += '----- Info ----\\n';\n    log += (Array.from(arguments)) + '\\n';\n    consoleLog.apply(console, arguments as any);\n  };\n\n  console.error = function () {\n    log += '----- Error ----\\n';\n    log += (Array.from(arguments)) + '\\n';\n    consoleError.apply(console, arguments as any);\n  };\n}\n\nfunction disableAppLog() {\n  log = '';\n  console.log = consoleLog;\n  console.error = consoleError;\n}\n\n//const webkit = (window as any).webkit;\nfunction copyToClipboard(text: string) {\n  try {\n    navigator.clipboard && navigator.clipboard.writeText(text);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nconst Globals = {\n  pwaUrl,\n  bugReportApiUrl,\n  storeFile: 'SpinTheWheelSettings.json',\n  getLog,\n  enableAppLog,\n  disableAppLog,\n  appSettings: {\n    'theme': '佈景主題',\n    'uiFontSize': 'UI字型大小',\n  } as Record<string, string>,\n  fetchErrorContent: (\n    <div className='contentCenter'>\n      <IonLabel>\n        <div>\n          <div>連線失敗!</div>\n          <div style={{ fontSize: 'var(--ui-font-size)', paddingTop: 24 }}>如果問題持續發生，請執行<a href={`/${pwaUrl}/settings`} target=\"_self\">設定頁</a>的 app 異常回報功能。</div>\n        </div>\n      </IonLabel>\n    </div>\n  ),\n  updateApp: () => {\n    return new Promise(async resolve => {\n      navigator.serviceWorker.getRegistrations().then(async regs => {\n        const hasUpdates = await Promise.all(regs.map(reg => (reg.update() as any).then((newReg: ServiceWorkerRegistration) => {\n          return newReg.installing !== null || newReg.waiting !== null;\n        })));\n        resolve(hasUpdates.reduce((prev, curr) => prev || curr, false));\n      });\n    });\n  },\n  updateCssVars: (settings: any) => {\n    document.documentElement.style.cssText = `--ui-font-size: ${settings.uiFontSize}px;`\n  },\n  isTouchDevice: () => {\n    return isPlatform('ios') || isPlatform('android');\n  },\n  isStoreApps: () => {\n    return isPlatform('pwa') || isPlatform('electron');\n  },\n  clearAppData,\n  copyToClipboard,\n};\n\nexport default Globals;\n","import React from 'react';\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonList, IonItem, IonRange, IonIcon, IonLabel, IonToggle, IonButton, IonAlert, IonSelect, IonSelectOption, IonToast, withIonLifeCycle } from '@ionic/react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router-dom';\nimport axios from 'axios';\n\nimport Globals from '../Globals';\nimport { helpCircle, text, colorPalette, bug, download } from 'ionicons/icons';\nimport './SettingsPage.css';\nimport PackageInfos from '../../package.json';\n\ninterface StateProps {\n  showBugReportAlert: boolean;\n  showClearAlert: boolean;\n  showToast: boolean;\n  toastMessage: string;\n}\n\ninterface Props {\n  dispatch: Function;\n  hasAppLog: boolean;\n  theme: number;\n  uiFontSize: number;\n  settings: any;\n  voiceURI: string;\n  speechRate: number;\n  mainVersion: string | null;\n  cbetaOfflineDbMode: boolean;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n  label: string;\n}> { }\n\nclass _SettingsPage extends React.Component<PageProps, StateProps> {\n  constructor(props: any) {\n    super(props);\n\n    this.state = {\n      showBugReportAlert: false,\n      showClearAlert: false,\n      showToast: false,\n      toastMessage: '',\n    };\n  }\n\n  ionViewWillEnter() {\n  }\n\n  reportText = '';\n  render() {\n    return (\n      <IonPage>\n        <IonHeader>\n          <IonToolbar>\n            <IonTitle className='uiFont'>設定</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent>\n          <IonList>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={bug} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>啟用 app 異常記錄</IonLabel>\n              <IonToggle slot='end' checked={this.props.hasAppLog} onIonChange={e => {\n                const isChecked = e.detail.checked;\n\n                if (this.props.hasAppLog === isChecked) {\n                  return;\n                }\n\n                isChecked ? Globals.enableAppLog() : Globals.disableAppLog();\n                this.props.dispatch({\n                  type: \"SET_KEY_VAL\",\n                  key: 'hasAppLog',\n                  val: isChecked\n                });\n              }} />\n            </IonItem>\n            <IonItem hidden={!this.props.settings.hasAppLog}>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={bug} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>回報app異常記錄</IonLabel>\n              <IonButton fill='outline' shape='round' slot='end' size='large' className='uiFont' onClick={e => {\n                this.reportText = \"瀏覽器：\" + navigator.userAgent + \"\\n\\nApp版本：\" + PackageInfos.pwaVersion + \"\\n\\nApp設定：\" + JSON.stringify(this.props.settings) + \"\\n\\nLog：\\n\" + Globals.getLog();\n                this.setState({ showBugReportAlert: true });\n              }}>回報</IonButton>\n              <IonAlert\n                cssClass='uiFont'\n                backdropDismiss={false}\n                isOpen={this.state.showBugReportAlert}\n                header={'異常回報'}\n                subHeader='輸入您的 E-mail，以後續聯絡'\n                inputs={[\n                  {\n                    name: 'name0',\n                    type: 'email',\n                    placeholder: '例：abc@example.com'\n                  },\n                  {\n                    name: 'name1',\n                    type: 'textarea',\n                    placeholder: '請描述發生步驟'\n                  },\n                ]}\n                buttons={[\n                  {\n                    text: '送出',\n                    cssClass: 'primary uiFont',\n                    handler: async (value) => {\n                      if (!/^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/.test(value.name0)) {\n                        this.setState({ showBugReportAlert: false, showToast: true, toastMessage: `錯誤，E-mail 不符格式！` });\n                        return\n                      }\n\n                      try {\n                        const axiosInstance = axios.create({ timeout: 10000 });\n                        await axiosInstance.post(Globals.bugReportApiUrl, {\n                          subject: `${PackageInfos.productName}異常記錄回報`,\n                          text: `E-mail: ${value.name0}\\n\\n發生步驟: ${value.name1}\\n\\n${this.reportText}`,\n                        });\n                        this.setState({ showBugReportAlert: false, showToast: true, toastMessage: `異常回報成功` });\n                      } catch (error) {\n                        console.error(error);\n                        this.setState({ showBugReportAlert: false, showToast: true, toastMessage: `異常回報失敗` });\n                      }\n                    },\n                  },\n                  {\n                    text: '取消',\n                    role: 'cancel',\n                    cssClass: 'secondary uiFont',\n                    handler: () => this.setState({ showBugReportAlert: false }),\n                  },\n                ]}\n              />\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={download} slot='start' />\n              <div className='contentBlock'>\n                <div style={{ flexDirection: 'column' }}>\n                  <IonLabel className='ion-text-wrap uiFont'>App 設定</IonLabel>\n                  <div style={{ textAlign: 'right' }}>\n                    <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={async (e) => {\n                      const settingsJsonUri = `data:text/json;charset=utf-8,${encodeURIComponent(localStorage.getItem(Globals.storeFile) || '')}`;\n                      const a = document.createElement('a');\n                      a.href = settingsJsonUri;\n                      a.download = Globals.storeFile;\n                      a.click();\n                      a.remove();\n                    }}>匯出</IonButton>\n                    <input id='importJsonInput' type='file' accept='.json' style={{ display: 'none' }} onChange={async (ev) => {\n                      const file = ev.target.files?.item(0);\n                      const fileText = await file?.text() || '';\n                      try {\n                        // JSON text validation.\n                        JSON.parse(fileText);\n                        localStorage.setItem(Globals.storeFile, fileText);\n                        this.props.dispatch({ type: 'LOAD_SETTINGS' });\n                      } catch (e) {\n                        console.error(e);\n                        console.error(new Error().stack);\n                      }\n                      (document.getElementById('importJsonInput') as HTMLInputElement).value = '';\n                    }} />\n\n                    <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={(e) => {\n                      (document.querySelector('#importJsonInput') as HTMLInputElement).click();\n                    }}>匯入</IonButton>\n                    <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={(e) => {\n                      this.setState({ showClearAlert: true });\n                    }}>重置</IonButton>\n                    <IonAlert\n                      cssClass='uiFont'\n                      isOpen={this.state.showClearAlert}\n                      backdropDismiss={false}\n                      onDidPresent={(ev) => {\n                      }}\n                      header={'重置會還原 app 設定預設值並清除書籤！確定重置？'}\n                      buttons={[\n                        {\n                          text: '取消',\n                          cssClass: 'primary uiFont',\n                          handler: (value) => {\n                            this.setState({\n                              showClearAlert: false,\n                            });\n                          },\n                        },\n                        {\n                          text: '重置',\n                          cssClass: 'secondary uiFont',\n                          handler: async (value) => {\n                            await Globals.clearAppData();\n                            this.props.dispatch({ type: 'DEFAULT_SETTINGS' });\n                            this.setState({ showClearAlert: false, showToast: true, toastMessage: \"清除成功!\" });\n                          },\n                        }\n                      ]}\n                    />\n                  </div>\n                </div>\n              </div>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={colorPalette} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>{Globals.appSettings['theme']}</IonLabel>\n              <IonSelect slot='end'\n                value={+this.props.theme}\n                className='uiFont'\n                interface='popover'\n                interfaceOptions={{ cssClass: 'SpinTheWheelthemes' }}\n                onIonChange={e => {\n                  const value = +e.detail.value;\n                  // Important! Because it can results in rerendering of this component but\n                  // store states (this.props.theme) of this component is not updated yet! And IonSelect value will be changed\n                  // back to the old value and onIonChange will be triggered again!\n                  // Thus, we use this check to ignore this invalid change.\n                  if (+this.props.theme === value) {\n                    return;\n                  }\n\n                  this.props.dispatch({\n                    type: \"SET_KEY_VAL\",\n                    key: 'theme',\n                    val: value,\n                  });\n                }}>\n                <IonSelectOption className='uiFont cbeta' value={0}>綠底</IonSelectOption>\n                <IonSelectOption className='uiFont dark' value={1}>暗色</IonSelectOption>\n                <IonSelectOption className='uiFont light' value={2}>亮色</IonSelectOption>\n                <IonSelectOption className='uiFont oldPaper' value={3}>舊書</IonSelectOption>\n                <IonSelectOption className='uiFont marble' value={4}>大理石</IonSelectOption>\n              </IonSelect>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={text} slot='start' />\n              <div className=\"contentBlock\">\n                <div style={{ flexDirection: \"column\" }}>\n                  <span className='ion-text-wrap uiFont'>{Globals.appSettings['uiFontSize']}: {this.props.uiFontSize}</span>\n                  <IonRange min={12} max={48} pin={true} snaps={true} value={this.props.uiFontSize} onIonChange={e => {\n                    this.props.dispatch({\n                      type: \"SET_KEY_VAL\",\n                      key: 'uiFontSize',\n                      val: +e.detail.value,\n                    });\n                    setImmediate(() => {\n                      Globals.updateCssVars(this.props.settings);\n                    });\n                  }} />\n                </div>\n              </div>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={helpCircle} slot='start' />\n              <div className='uiFont'>\n                <div>關於</div>\n                <div>作者: Meng-Yuan Huang</div>\n                <div><a href=\"mailto:myh@live.com\" target=\"_new\">myh@live.com</a></div>\n              </div>\n            </IonItem>\n          </IonList>\n\n          <IonToast\n            cssClass='uiFont'\n            isOpen={this.state.showToast}\n            onDidDismiss={() => this.setState({ showToast: false })}\n            message={this.state.toastMessage}\n            duration={2000}\n          />\n        </IonContent>\n      </IonPage >\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    settings: state.settings,\n    hasAppLog: state.settings.hasAppLog,\n    theme: state.settings.theme,\n    uiFontSize: state.settings.uiFontSize,\n    speechRate: state.settings.speechRate,\n    bookmarks: state.settings.bookmarks,\n    voiceURI: state.settings.voiceURI,\n    mainVersion: state.tmpSettings.mainVersion,\n  }\n};\n\nconst SettingsPage = withIonLifeCycle(_SettingsPage);\n\nexport default connect(\n  mapStateToProps,\n)(SettingsPage);\n","import React from 'react';\nimport { IonContent, IonHeader, IonPage, IonToolbar, withIonLifeCycle, IonToast, IonTitle, IonButton, IonRange, IonIcon } from '@ionic/react';\nimport { shareSocial } from 'ionicons/icons';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport { Settings } from '../models/Settings';\nimport { TmpSettings } from '../models/TmpSettings';\nimport DecisionsModal from '../components/DecisionsModal';\nimport Wheel from '../components/Wheel';\n\ninterface Props {\n  dispatch: Function;\n  tmpSettings: TmpSettings;\n  settings: Settings;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  path: string;\n  tab: string;\n}> { }\n\ninterface State {\n  selectedItem: string;\n  showDecisonsModal: boolean;\n  showToast: boolean;\n  toastMessage: string;\n}\n\nclass _WheelPage extends React.Component<PageProps, State> {\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      selectedItem: '',\n      showDecisonsModal: false,\n      showToast: false,\n      toastMessage: '',\n    }\n  }\n\n  decision() {\n    const decisions = this.props.settings.decisions;\n    if (decisions.length === 0) {\n      return undefined;\n    }\n    return decisions[this.props.settings.selectedDecision]\n  }\n\n  ionViewWillEnter() {\n    //console.log(`${this.props.match.url} will enter`);\n  }\n\n  spin: Function | null | undefined;\n  renderWheel: Function | null | undefined;\n\n  render() {\n    return (\n      <IonPage>\n        <IonHeader>\n          <IonToolbar>\n            <IonTitle className='uiFont'>幸運輪盤</IonTitle>\n\n            <IonButton fill=\"clear\" slot='end' onClick={e => {\n              const thisDecision = `title=${encodeURIComponent(this.decision()!.title)}&${this.decision()!.selections.map(v => `s=${encodeURIComponent(v.title)}`).join('&')}`;\n              this.props.dispatch({\n                type: \"TMP_SET_KEY_VAL\",\n                key: 'shareTextModal',\n                val: {\n                  show: true,\n                  text: `${window.location.origin}${window.location.pathname}?${thisDecision}`,\n                },\n              });\n            }}>\n              <IonIcon icon={shareSocial} slot='icon-only' />\n            </IonButton>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent>\n          <div className='contentCenter'>\n            <div style={{ flex: '0 0 auto', fontSize: this.decision()?.fontSize || 24 }}>\n              {this.decision()?.title || <span>&nbsp;</span>}\n              <span style={{ color: 'red' }}>{this.state.selectedItem}</span>\n            </div>\n\n            <Wheel updateSelectedItem={(result: any) => {\n              this.setState({ selectedItem: result });\n            }}\n              decision={this.decision.bind(this)}\n              setSpin={(spin: Function) => this.spin = spin}\n              setRenderWheel={(renderWheel: Function) => this.renderWheel = renderWheel}\n            />\n\n            <div style={{ display: 'flex', flexDirection: 'row', verticalAlign: 'middle', width: 'calc(100% - 40px)' }}>\n              <span className='uiFont' style={{ marginTop: 'auto', marginBottom: 'auto' }}>文字大小</span>\n              <div style={{ marginTop: 'auto', marginBottom: 'auto', flex: '1 1 auto' }}>\n                <IonRange min={12} max={128} pin={true} snaps={true} value={this.decision()?.fontSize || 24} onIonChange={async e => {\n                  let decisions = this.props.settings.decisions;\n                  let decision = this.decision()!;\n\n                  if (decision == null) {\n                    return;\n                  }\n\n                  decision.fontSize = +e.detail.value;\n                  const i = decisions.findIndex(d => d.uuid === decision.uuid);\n                  decisions[i] = decision;\n                  this.props.dispatch({\n                    type: \"UPDATE_DECISIONS\",\n                    decisions: decisions,\n                  });\n                  setImmediate(() => {\n                    this.renderWheel!();\n                  });\n                }} />\n              </div>\n            </div>\n\n            <div className='buttonsRow'>\n              <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={e => {\n                this.setState({ showDecisonsModal: true });\n              }}>選擇</IonButton>\n              <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={e => {\n                this.spin!();\n              }}>轉動</IonButton>\n            </div>\n\n          </div>\n\n          <DecisionsModal\n            {...{\n              showModal: this.state.showDecisonsModal,\n              finish: () => {\n                this.setState({ showDecisonsModal: false, selectedItem: '' });\n                setImmediate(() => {\n                  this.renderWheel!();\n                });\n              },\n              ...this.props\n            }}\n          />\n\n          <IonToast\n            cssClass='uiFont'\n            isOpen={this.state.showToast}\n            onDidDismiss={() => this.setState({ showToast: false })}\n            message={this.state.toastMessage}\n            duration={2000}\n          />\n        </IonContent>\n      </IonPage>\n    );\n  }\n};\n\nconst WheelPage = withIonLifeCycle(_WheelPage);\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    isLoadingData: state.tmpSettings.isLoadingData,\n    tmpSettings: state.tmpSettings,\n    settings: state.settings,\n  }\n};\n\n//const mapDispatchToProps = {};\n\nexport default connect(\n  mapStateToProps,\n)(WheelPage);\n","import React from 'react';\nimport { withIonLifeCycle } from '@ionic/react';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\n\nimport { SelectionItem } from '../models/SelectionItem';\nimport { Decision } from '../models/Decision';\nconst padding = { top: 20, right: 20, bottom: 20, left: 20 };\nconst spins = 3;\nconst degrees = spins * 360;\n\n// PURE FUNCTIONS\nfunction getRandomInt(min: number, max: number) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min)) + min;\n}\n\nclass _Wheel extends React.Component<{\n    setSpin: Function,\n    setRenderWheel: Function,\n    updateSelectedItem: Function,\n    decision: () => Decision | undefined,\n}> {\n    wheel: d3.Selection<SVGGElement, null, d3.BaseType, unknown> | undefined;\n\n    constructor(props: any) {\n        super(props);\n        this.props.setSpin(this.spin.bind(this));\n        this.props.setRenderWheel(this.renderWheel.bind(this));\n\n        window.addEventListener('resize', () => {\n            this.renderWheel();\n        });\n    }\n\n    ionViewWillEnter() {\n        this.renderWheel();\n    }\n\n    get decision() {\n        return this.props.decision();\n    }\n\n    renderWheel() {\n        if (document.querySelector('#chart') == null) {\n            return;\n        }\n\n        if (this.decision == null) {\n            (document.querySelector('#chart') as HTMLElement).hidden = true;\n            return;\n        }\n\n        (document.querySelector('#chart') as HTMLElement).hidden = false;\n\n        d3.select('#chart').selectChild('svg').remove();\n\n        const chartBoundingClientRect = document.querySelector('#chart')!.getBoundingClientRect();\n        const svgWidth = chartBoundingClientRect.width;\n        const svgHeight = chartBoundingClientRect.height;\n        const width = svgWidth - padding.left - padding.right;\n        const height = svgHeight - padding.top - padding.bottom;\n        const radius = Math.min(width, height) / 2;\n        const color = d3.scaleOrdinal([\"#e5dff6\", \"#e5f6df\", \"#dfe5f6\", \"#ebd4f3\", \"#f6f0df\"]);\n\n        let svg: d3.Selection<d3.BaseType, null, d3.BaseType, unknown> = d3.select('#chart')\n            .selectAll('svg').data([null])\n            .join('svg')\n            .attr('width', svgWidth)\n            .attr('height', svgHeight);\n\n        svg.selectChildren().remove();\n\n        const container = svg.append('g')\n            .attr('class', 'chartcontainer')\n            .attr('transform', `translate(${width / 2 + padding.left},${height / 2 + padding.top})`);\n\n        this.wheel = container.append('g')\n            .attr('class', 'wheel');\n\n        const pie = d3.pie<SelectionItem>().sort(null).value(function (d) { return 1; });\n\n        const arc = d3.arc<d3.PieArcDatum<SelectionItem>>()\n            .innerRadius(0)\n            .outerRadius(radius);\n\n        const arcs = this.wheel!.selectAll('g.slice')\n            .data(pie(this.decision!.selections))\n            .enter()\n            .append('g')\n            .attr('class', 'slice');\n\n        arcs.append('path')\n            .attr('fill', function (d, i: number) { return color(i + ''); })\n            .attr('d', function (d: d3.PieArcDatum<SelectionItem>) { return arc(d); });\n\n        arcs.append(\"text\").attr(\"transform\", function (d: d3.PieArcDatum<SelectionItem>) {\n            //d.innerRadius = 0;\n            const outerRadius = radius;\n            const angle = (d.startAngle + d.endAngle) / 2;\n            return `rotate(${(angle * 180 / Math.PI - 90)})translate(${outerRadius - 10})`;\n        })\n            .attr(\"text-anchor\", \"end\")\n            .text((d: any, i: number) => {\n                //console.log(this.state.data[i].ticker);\n                return this.decision!.selections[i].title;\n            })\n            .style('font-size', this.decision!.fontSize);\n\n        // arrow\n        svg.append('g')\n            .attr('class', 'arrow')\n            .attr('transform', `translate(${(width + padding.left + padding.right) / 2 - 15}, 12)`)\n            .append('path')\n            .attr('d', `M0 0 H30 L 15 ${Math.sqrt(3) / 2 * 30}Z`)\n            .style('fill', '#000809');\n    }\n\n    spin() {\n        const piedegree = 360 / this.decision!.selections.length;\n        const randomAssetIndex = getRandomInt(0, this.decision!.selections.length);\n        const randomPieMovement = getRandomInt(1, piedegree);\n\n        const rotation = (this.decision!.selections.length - randomAssetIndex) * piedegree - randomPieMovement + degrees;\n\n        function rotTween() {\n            let i = d3.interpolate(0, rotation);\n            return function (t: number) {\n                return `rotate(${i(t)})`;\n            };\n        }\n\n        this.wheel?.transition()\n            .duration(3000)\n            .attrTween('transform', rotTween)\n            .ease(d3.easeCircleOut)\n            .on('end', () => {\n\n                const result = this.decision!.selections[randomAssetIndex].title;\n                //console.log(result);\n                this.props.updateSelectedItem(result);\n            });\n    }\n\n    render() {\n        return <div id=\"chart\"></div>;\n    }\n}\n\nconst Wheel = connect((state: any) => {\n    return {\n        decisions: state.settings.decisions,\n        selectedDecision: state.settings.selectedDecision,\n    };\n})(withIonLifeCycle(_Wheel))\n\nexport default Wheel;","import React from 'react';\nimport { IonContent, IonList, IonReorderGroup, IonReorder, IonItem, IonItemSliding, IonItemOptions, IonItemOption, IonIcon, IonToast, IonFab, IonFabButton, IonModal, IonButton, IonHeader, IonTitle, IonToolbar, IonInput } from '@ionic/react';\nimport { ItemReorderEventDetail } from '@ionic/core';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { add, swapVertical } from 'ionicons/icons';\n\nimport { Decision } from '../models/Decision';\nimport { SelectionItem } from '../models/SelectionItem';\n\ninterface Props {\n  showModal: boolean;\n  selectedDecision: Decision | null;\n  finish: Function;\n  dispatch: Function;\n}\n\ninterface State {\n  newDecision: Decision;\n  showAddSelectionItemAlert: boolean;\n  reorder: boolean;\n  showToast: boolean;\n  toastMessage: string;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\nclass _SelectionItemsModal extends React.Component<PageProps, State> {\n  bookmarkListRef: React.RefObject<HTMLIonListElement>;\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      // Copy object by JSON calls.\n      newDecision: JSON.parse(JSON.stringify(this.props.selectedDecision)),\n      showAddSelectionItemAlert: false,\n      reorder: false,\n      showToast: false,\n      toastMessage: '',\n    }\n    this.bookmarkListRef = React.createRef<HTMLIonListElement>();\n  }\n\n  static getDerivedStateFromProps(props: any, state: any) {\n    if (props.selectedDecision !== state.newDecision) {\n      return {\n        newDecision: props.selectedDecision,\n      };\n    }\n\n    // Return null to indicate no change to state.\n    return null;\n  }\n\n  delBookmarkHandler(i: number) {\n    let newDecision = this.state.newDecision;\n    newDecision.selections.splice(i, 1);\n    this.setState({ newDecision });\n  }\n\n  reorderBookmarks(event: CustomEvent<ItemReorderEventDetail>) {\n    let newDecision = this.state.newDecision;\n    newDecision.selections = event.detail.complete(newDecision.selections);\n    this.setState({ newDecision });    \n  }\n\n  getBookmarkRows() {\n    let rows = Array<object>();\n    this.state.newDecision.selections.forEach((d, i) => {\n      rows.push(\n        <IonItemSliding key={`selectionItemSliding_` + i}>\n          <IonItem key={`selectionItem_` + i} className='uiFont' button={true}\n            onClick={e => {\n            }}>\n\n            <IonInput\n              value={d.title}\n              placeholder='新項目'\n              clearInput\n              className='ionInput'\n              onIonChange={e => {\n                let newDecision = this.state.newDecision;\n                newDecision.selections[i].title = e.detail.value || '';\n                this.setState({ newDecision });\n              }}></IonInput>\n            <IonReorder slot='end' />\n          </IonItem>\n\n          <IonItemOptions side=\"end\">\n            <IonItemOption className='uiFont' color='danger' onClick={(e) => {\n              this.delBookmarkHandler(i);\n              this.bookmarkListRef.current?.closeSlidingItems();\n            }}>刪除</IonItemOption>\n          </IonItemOptions>\n        </IonItemSliding>\n      );\n    });\n    return rows;\n  }\n\n  render() {\n    if (this.props.selectedDecision == null) {\n      return <></>;\n    }\n\n    return (\n      <IonModal\n        cssClass='uiFont'\n        swipeToClose={false}\n        backdropDismiss={false}\n        isOpen={this.props.showModal}\n        /*\n        onWillPresent={() =>\n          this.setState({newDecision: JSON.parse(JSON.stringify(this.decision))})\n        }*/\n      //presentingElement={router || undefined}\n      >\n        <IonHeader>\n          <IonToolbar>\n            <IonTitle className='uiFont'>編輯輪盤</IonTitle>\n\n            <IonButton fill={this.state.reorder ? 'solid' : 'clear'} slot='end'\n              onClick={ev => this.setState({ reorder: !this.state.reorder })}>\n              <IonIcon icon={swapVertical} slot='icon-only' />\n            </IonButton>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent className='contentCenter'>\n\n          <IonInput\n            value={this.state.newDecision.title}\n            placeholder='輪盤標題'\n            clearInput\n            className='ionInput'\n            onIonChange={e => {\n              let newDecision = this.state.newDecision;\n              newDecision.title = e.detail.value || '';\n              this.setState({ newDecision });\n            }}>\n          </IonInput>\n\n          <IonList key='bookmarkList0' ref={this.bookmarkListRef}>\n            <IonReorderGroup disabled={!this.state.reorder} onIonItemReorder={(event: CustomEvent<ItemReorderEventDetail>) => { this.reorderBookmarks(event); }}>\n              {this.getBookmarkRows()}\n            </IonReorderGroup>\n          </IonList>\n\n          <IonFab vertical='bottom' horizontal='end' slot='fixed'>\n            <IonFabButton\n              onClick={e => {\n                let newDecision = this.state.newDecision;\n                newDecision.selections.push(new SelectionItem({ title: '' }));\n                this.setState({ newDecision });\n              }}\n            >\n              <IonIcon icon={add} />\n            </IonFabButton>\n          </IonFab>\n\n          <div className='buttonsRow'>\n            <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={e => {\n              this.props.finish(this.state.newDecision);\n            }}>儲存</IonButton>\n\n            <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={e => {\n              this.props.finish();\n            }}>取消</IonButton>\n          </div>\n\n          <IonToast\n            cssClass='uiFont'\n            isOpen={this.state.showToast}\n            onDidDismiss={() => this.setState({ showToast: false })}\n            message={this.state.toastMessage}\n            duration={2000}\n          />\n        </IonContent>\n      </IonModal>\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    decisions: state.items,\n    settings: state.settings,\n  }\n};\n\n//const mapDispatchToProps = {};\n\n//const SelectionItemsModal = withIonLifeCycle(_SelectionItemsModal);\n\nexport default connect(\n  mapStateToProps,\n)(_SelectionItemsModal);\n","import React from 'react';\nimport { IonContent, IonList, IonReorderGroup, IonReorder, IonItem, IonItemSliding, IonItemOptions, IonItemOption, IonIcon, IonFab, IonFabButton, IonAlert, IonModal, IonButton, IonHeader, IonTitle, IonToolbar } from '@ionic/react';\nimport { ItemReorderEventDetail } from '@ionic/core';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { add, build, swapVertical } from 'ionicons/icons';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { Settings } from '../models/Settings';\nimport { TmpSettings } from '../models/TmpSettings';\nimport { Decision } from '../models/Decision';\nimport SelectionItemsModal from './SelectionItemsModal';\n\ninterface Props {\n  showModal: boolean;\n  finish: Function;\n  dispatch: Function;\n  tmpSettings: TmpSettings;\n  settings: Settings;\n}\n\ninterface State {\n  showAddDecisionAlert: boolean;\n  selectedDecision: Decision | null;\n  showSelectionItemsModal: boolean;\n  reorder: boolean;\n  showToast: boolean;\n  toastMessage: string;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\nclass _DecisionsModal extends React.Component<PageProps, State> {\n  decisionListRef: React.RefObject<HTMLIonListElement>;\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      showAddDecisionAlert: false,\n      selectedDecision: null,\n      showSelectionItemsModal: false,\n      reorder: false,\n      showToast: false,\n      toastMessage: '',\n    }\n    this.decisionListRef = React.createRef<HTMLIonListElement>();\n  }\n\n  delDecisionHandler(uuid: string) {\n    this.props.dispatch({\n      type: \"DEL_DECISION\",\n      uuid: uuid,\n    });\n  }\n\n  reorderDecisions(event: CustomEvent<ItemReorderEventDetail>) {\n    const decisions = event.detail.complete(this.props.settings.decisions);\n    this.props.dispatch({\n      type: \"UPDATE_DECISIONS\",\n      decisions: decisions,\n    });\n  }\n\n  getDecisionRows() {\n    let decisions = this.props.settings.decisions;\n    let rows = Array<object>();\n    decisions.forEach((d, i) => {\n      rows.push(\n        <IonItemSliding key={`decisionItemSliding_` + i}>\n          <IonItem key={`decisionItem_` + i}>\n            <IonButton fill='clear' key={`decisionSubItem_` + i} size='large' className='uiFont' style={{flex: '1 1 auto'}}\n              onClick={e => {\n                this.props.dispatch({\n                  type: \"SET_KEY_VAL\",\n                  key: 'selectedDecision',\n                  val: i,\n                });\n                this.props.finish();\n              }}>\n              {d.title}\n            </IonButton>\n\n            <IonButton slot='end' size='large' onClick={e => {\n              this.setState({ showSelectionItemsModal: true, selectedDecision: d });\n            }}>\n              <IonIcon icon={build} slot='icon-only' />\n            </IonButton>\n            <IonReorder slot='end' />\n          </IonItem>\n\n          <IonItemOptions side=\"end\">\n            <IonItemOption className='uiFont' color='danger' onClick={(e) => {\n              this.delDecisionHandler(d.uuid);\n              this.decisionListRef.current?.closeSlidingItems();\n            }}>刪除</IonItemOption>\n          </IonItemOptions>\n        </IonItemSliding>\n      );\n    });\n    return rows;\n  }\n\n  render() {\n    return (\n      <IonModal\n        cssClass='uiFont'\n        swipeToClose={false}\n        backdropDismiss={false}\n        isOpen={this.props.showModal}\n      //presentingElement={router || undefined}\n      >\n        <IonHeader>\n          <IonToolbar>\n            <IonTitle className='uiFont'>選擇輪盤</IonTitle>\n\n            <IonButton fill={this.state.reorder ? 'solid' : 'clear'} slot='end'\n              onClick={ev => this.setState({ reorder: !this.state.reorder })}>\n              <IonIcon icon={swapVertical} slot='icon-only' />\n            </IonButton>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent className='contentCenter'>\n          <IonList key='decisionList0' ref={this.decisionListRef}>\n            <IonReorderGroup disabled={!this.state.reorder} onIonItemReorder={(event: CustomEvent<ItemReorderEventDetail>) => { this.reorderDecisions(event); }}>\n              {this.getDecisionRows()}\n            </IonReorderGroup>\n          </IonList>\n\n          <IonFab vertical='bottom' horizontal='end' slot='fixed'>\n            <IonFabButton\n              onClick={e => {\n                this.setState({ showAddDecisionAlert: true });\n              }}\n            >\n              <IonIcon icon={add} />\n            </IonFabButton>\n          </IonFab>\n\n          <IonAlert\n            cssClass='uiFont'\n            backdropDismiss={false}\n            isOpen={this.state.showAddDecisionAlert}\n            header={'請輸入輪盤標題'}\n            inputs={[\n              {\n                name: 'name0',\n                type: 'search',\n                placeholder: '例：中餐吃什麼？'\n              },\n            ]}\n            buttons={[\n              {\n                text: '新增',\n                cssClass: 'primary uiFont',\n                handler: (value) => {\n                  this.setState({ showAddDecisionAlert: false });\n                  this.props.dispatch({\n                    type: \"ADD_DECISION\",\n                    decision: new Decision(uuidv4(), value.name0),\n                  });\n                },\n              },\n              {\n                text: '取消',\n                role: 'cancel',\n                cssClass: 'secondary uiFont',\n                handler: () => this.setState({ showAddDecisionAlert: false }),\n              },\n            ]}\n          />\n\n          <div>\n            <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={e => {\n              this.props.finish();\n            }}>關閉</IonButton>\n          </div>\n\n          <SelectionItemsModal\n            {...{\n              selectedDecision: this.state.selectedDecision,\n              showModal: this.state.showSelectionItemsModal,\n              finish: (newDecision: Decision) => {\n                this.setState({ showSelectionItemsModal: false });\n                if (newDecision == null) {\n                  return;\n                }\n                let decisions = this.props.settings.decisions;\n                const i = decisions.findIndex(d => d.uuid === newDecision.uuid);\n                decisions[i] = newDecision;\n                this.props.dispatch({\n                  type: \"UPDATE_DECISIONS\",\n                  decisions: decisions,\n                });\n              },\n              history: this.props.history,\n              match: this.props.match,\n              location: this.props.location,\n            }}\n          />\n        </IonContent>\n      </IonModal>\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    decisions: state.items,\n    settings: state.settings,\n    tmpSettings: state.tmpSettings,\n  }\n};\n\n//const mapDispatchToProps = {};\n\n//const DecisionsModal = withIonLifeCycle(_DecisionsModal);\n\nexport default connect(\n  mapStateToProps,\n)(_DecisionsModal);\n","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t277,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t278,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t279,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t280,\n\t\t17\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t281,\n\t\t18\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t282,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t283,\n\t\t19\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t284,\n\t\t20\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t285,\n\t\t21\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t286,\n\t\t22\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t287,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t288,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t289,\n\t\t23\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t290,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t291,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t292,\n\t\t24\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t293,\n\t\t25\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t294,\n\t\t26\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t295,\n\t\t27\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t296,\n\t\t28\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t297,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t298,\n\t\t14\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t299,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t300,\n\t\t29\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t301,\n\t\t30\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t302,\n\t\t31\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t303,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t304,\n\t\t16\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t305,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t306,\n\t\t32\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t307,\n\t\t33\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t308,\n\t\t34\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t309,\n\t\t35\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t310,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t311,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t312,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t313,\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t314,\n\t\t15\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t315,\n\t\t37\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t316,\n\t\t38\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t317,\n\t\t39\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t318,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t319,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 200;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t320,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 202;\nmodule.exports = webpackAsyncContext;","import { v4 as uuidv4 } from 'uuid';\n\nimport { Decision } from \"./Decision\";\nimport { SelectionItem } from \"./SelectionItem\";\n\nexport class Settings {\n    version: number = 1;\n    hasAppLog: boolean = true;\n    theme: number = 2;\n    uiFontSize: number = 24;\n    selectedDecision = 0;\n    decisions: Decision[] = [\n        new Decision(\n            uuidv4(),\n            '出國去哪玩？',\n            [\n                new SelectionItem({ title: '美國' }),\n                new SelectionItem({ title: '日本' }),\n                new SelectionItem({ title: '澳洲' }),\n                new SelectionItem({ title: '法國' }),\n                new SelectionItem({ title: '加拿大' }),\n            ]\n        )\n    ];\n}\n","import Globals from '../../Globals';\nimport { Settings } from '../../models/Settings';\n\nfunction updateUi(newSettings: Settings) {\n  while (document.body.classList.length > 0) {\n    document.body.classList.remove(document.body.classList.item(0)!);\n  }\n  document.body.classList.toggle(`theme${newSettings.theme}`, true);\n  Globals.updateCssVars(newSettings);\n}\n\n// Used to store settings. They will be saved to file.\nexport default function reducer(state = new Settings(), action: any) {\n  var newSettings = { ...state };\n  switch (action.type) {\n    case \"LOAD_SETTINGS\":\n      newSettings = JSON.parse(localStorage.getItem(Globals.storeFile)!).settings;\n      updateUi(newSettings);\n      break;\n    case \"SET_KEY_VAL\":\n      var key = action.key;\n      var val = action.val;\n      switch (key) {\n        case 'theme': {\n          document.body.classList.forEach((val) => {\n            if (/theme/.test(val)) {\n              document.body.classList.remove(val);\n            }\n          });\n          document.body.classList.toggle(`theme${val}`, true);\n          break;\n        }\n      }\n\n      (newSettings as any)[key] = val;\n      localStorage.setItem(Globals.storeFile, JSON.stringify({ settings: newSettings }));\n      break;\n    case \"ADD_DECISION\":\n      newSettings.decisions = [...newSettings.decisions, action.decision];\n      localStorage.setItem(Globals.storeFile, JSON.stringify({ settings: newSettings }));\n      break;\n    case \"DEL_DECISION\": {\n      let temp = newSettings.decisions;\n      const idxToDel = temp.findIndex((b) => { return b.uuid === action.uuid });\n      if (idxToDel !== -1) {\n        temp.splice(idxToDel, 1);\n      }\n      newSettings.decisions = [...temp];\n      const prevIdx = idxToDel - 1;\n      if (prevIdx < newSettings.decisions.length) {\n        newSettings.selectedDecision = prevIdx >= 0 ? prevIdx : 0;\n      }\n      localStorage.setItem(Globals.storeFile, JSON.stringify({ settings: newSettings }));\n      break;\n    }\n    case \"UPDATE_DECISIONS\": {\n      newSettings.decisions = action.decisions;\n      localStorage.setItem(Globals.storeFile, JSON.stringify({ settings: newSettings }));\n      break;\n    }\n    // @ts-ignore\n    case \"DEFAULT_SETTINGS\":\n      newSettings = new Settings();\n      updateUi(newSettings);\n      break;\n    // eslint-disable-next-line\n    default:\n      if (Object.keys(newSettings).length === 0) {\n        newSettings = new Settings();\n      }\n      const defaultSettings = new Settings();\n      Object.keys(defaultSettings).forEach(key => {\n        if ((newSettings as any)[key] === undefined) {\n          (newSettings as any)[key] = (defaultSettings as any)[key];\n        }\n      });\n  }\n  return newSettings;\n}\n","export class TmpSettings {\n    shareTextModal = { text: '', show: false };\n}\n","import { combineReducers } from \"redux\"\n\nimport settings from \"./setReducer\"\nimport tmpSettings from \"./tmpSetReducer\"\n\nexport default combineReducers({\n  settings, tmpSettings\n})\n","import { TmpSettings } from \"../../models/TmpSettings\";\n\n// Used to store temp settings in RAM. They will not be saved to file.\nexport default function reducer(state = new TmpSettings(), action: any) {\n  var newState = { ...state };\n  var key = action.key;\n  var val = action.val;\n  (newState as any)[key] = val;\n  switch (action.type) {\n    case \"TMP_SET_KEY_VAL\": {\n      return newState;\n    }\n    default:\n      break;\n  }\n  return state;\n}\n","import React from 'react';\nimport { IonButton, IonContent, IonItem, IonLabel, IonList, IonModal, IonToggle } from '@ionic/react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Globals from '../Globals';\nimport * as qrcode from 'qrcode';\n\ninterface Props {\n  showModal: boolean;\n  text: string;\n  finish: Function;\n  settings: any;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\ninterface State {\n  isAppSettingsExport: Array<boolean>;\n}\n\nclass _ShareTextModal extends React.Component<PageProps, State> {\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      isAppSettingsExport: Array<boolean>(Object.keys(Globals.appSettings).length)\n    }\n  }\n\n  updateQrCode() {\n    const appSettingsExport = Object.keys(Globals.appSettings).filter((key, i) => this.state.isAppSettingsExport[i]).map((key, i) => {return {key: key, val: this.props.settings[key]};});\n    let appSettingsString: string | null = appSettingsExport.map(keyVal => `${keyVal.key}=${+keyVal.val}`).join(',');\n    appSettingsString = appSettingsString !== '' ? `settings=${appSettingsString}` : null;\n    let appUrl = this.props.text;\n    const hasQueryString = /\\?/.test(appUrl);\n    if (appSettingsString) {\n      appUrl += hasQueryString ? `&${appSettingsString}` : `?${appSettingsString}`;\n    }\n    \n    Globals.copyToClipboard(appUrl);\n    const qrcCanvas = document.getElementById('qrcCanvas');\n    qrcode.toCanvas(qrcCanvas, appUrl);\n    return qrcCanvas;\n  }\n\n  render() {\n    return (\n      <IonModal\n        isOpen={this.props.showModal}\n        cssClass='uiFont'\n        swipeToClose={true}\n        //presentingElement={router || undefined}\n        onWillPresent={() => {\n          let isAppSettingsExport: Array<boolean> = [];\n          for (let i = 0; i < this.state.isAppSettingsExport.length; i++) {\n            isAppSettingsExport.push(false);\n          }\n          this.setState({isAppSettingsExport: isAppSettingsExport}, () => {\n            this.updateQrCode();\n          });\n        }}\n        onDidDismiss={() => this.props.finish()}>\n        <IonContent>\n          <div style={{ display: 'flex', flexDirection: 'column', height: '100%', alignItems: 'center' }}>\n            <div>\n              <IonLabel className='uiFont'>此頁app連結已複製至剪貼簿！</IonLabel>\n            </div>\n            <div>\n              <IonLabel className='uiFont'>也可以使用QR Code分享:</IonLabel>\n            </div>\n            <div style={{ flexGrow: 1, flexShrink: 0, display: 'flex', alignItems: 'center', margin: 10 }}>\n              <canvas id='qrcCanvas' width='500' height='500' style={{ margin: '0px auto' }} />\n            </div>\n            <div>\n              <IonLabel className='uiFont'>包括app設定:</IonLabel>\n              <IonList>\n                {\n                  Object.keys(Globals.appSettings).map((key, i) =>\n                    <IonItem key={`appSettingExportItem_${i}`}>\n                      <IonLabel className='ion-text-wrap uiFont'>{Globals.appSettings[key]}</IonLabel>\n                      <IonToggle slot='end' onIonChange={e => {\n                        const isAppSettingsExport =  this.state.isAppSettingsExport;\n                        isAppSettingsExport[i] = e.detail.checked;\n                        this.setState({isAppSettingsExport: isAppSettingsExport}, () => {\n                          this.updateQrCode();\n                        });\n                      }} />\n                    </IonItem>\n                  )\n                }\n              </IonList>\n            </div>\n            <div>\n              <IonButton fill='outline' shape='round' size='large' onClick={() => this.props.finish()}>關閉</IonButton>\n            </div>\n          </div>\n        </IonContent>\n      </IonModal>\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    settings: state.settings,\n  }\n};\n\n//const mapDispatchToProps = {};\n\nexport default connect(\n  mapStateToProps,\n)(_ShareTextModal);\n","import React from 'react';\nimport { Redirect, Route, RouteComponentProps, withRouter } from 'react-router-dom';\nimport {\n  setupConfig,\n  IonApp,\n  IonIcon,\n  IonRouterOutlet,\n  IonTabBar,\n  IonTabButton,\n  IonTabs,\n  IonAlert,\n  IonToast,\n} from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\nimport { connect, Provider } from 'react-redux';\nimport queryString from 'query-string';\nimport getSavedStore from './redux/store';\nimport { settings, pieChart } from 'ionicons/icons';\nimport { v4 as uuidv4 } from 'uuid';\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Theme variables */\nimport './theme/variables.css';\nimport SettingsPage from './pages/SettingsPage';\nimport Globals from './Globals';\nimport ShareTextModal from './components/ShareTextModal';\nimport { Settings } from './models/Settings';\nimport { TmpSettings } from './models/TmpSettings';\nimport WheelPage from './pages/WheelPage';\nimport { Decision } from './models/Decision';\nimport { SelectionItem } from './models/SelectionItem';\n\nconst electronBackendApi: any = (window as any).electronBackendApi;\n\nlet store = getSavedStore();\n/*\nclass DebugRouter extends IonReactRouter {\n  constructor(props: any) {\n    super(props);\n    console.log('initial history is: ', JSON.stringify(this.history, null, 2))\n    this.history.listen((location, action) => {\n      console.log(\n        `The current URL is ${location.pathname}${location.search}${location.hash}`\n      )\n      console.log(`The last navigation action was ${action}`, JSON.stringify(this.history, null, 2));\n    });\n  }\n}\n*/\n\nsetupConfig({\n  mode: 'md', // Use a consistent UI style across Android and iOS.\n  swipeBackEnabled: false,\n});\n\nexport var serviceWorkCallbacks = {\n  onSuccess: function (registration: ServiceWorkerRegistration) { },\n  onUpdate: function (registration: ServiceWorkerRegistration) { },\n};\n\ninterface Props {\n  dispatch: Function;\n  shareTextModal: any;\n  settings: Settings;\n  tmpSettings: TmpSettings;\n}\n\ninterface PageProps extends RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\ninterface AppOrigProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\ninterface State {\n  showToast: boolean;\n  toastMessage: string;\n  showUpdateAlert: boolean;\n  showRestoreAppSettingsToast: boolean;\n}\n\nclass _App extends React.Component<PageProps> {\n  render() {\n    return (\n      <Provider store={store}>\n        <AppOrig {...this.props} />\n      </Provider>\n    );\n  }\n}\n\nclass _AppOrig extends React.Component<AppOrigProps, State> {\n  registrationNew: ServiceWorkerRegistration | null;\n  originalAppSettingsStr: string | null | undefined;\n  queryParams: any;\n\n  constructor(props: any) {\n    super(props);\n    if (!this.props.settings.hasAppLog) {\n      Globals.disableAppLog();\n    }\n\n    electronBackendApi?.receive(\"fromMain\", (data: any) => {\n      switch (data.event) {\n        case 'version':\n          store.dispatch({\n            type: \"TMP_SET_KEY_VAL\",\n            key: 'mainVersion',\n            val: data.version,\n          });\n          break;\n      }\n    });\n    electronBackendApi?.send(\"toMain\", { event: 'ready' });\n\n    this.registrationNew = null;\n\n    // ----- Initializing UI settings -----\n    // Apply the theme setting.\n    while (document.body.classList.length > 0) {\n      document.body.classList.remove(document.body.classList.item(0)!);\n    }\n    document.body.classList.toggle(`theme${this.props.settings.theme}`, true);\n\n    // Modify UI settings from query string.\n    this.queryParams = queryString.parse(this.props.location.search) as any;\n    if (this.queryParams.settings) {\n      this.originalAppSettingsStr = localStorage.getItem(Globals.storeFile);\n      (this.queryParams.settings as string).split(',').forEach(setting => {\n        const keyVal = setting.split('=');\n        this.props.dispatch({\n          type: \"SET_KEY_VAL\",\n          key: keyVal[0],\n          val: +keyVal[1],\n        });\n      });\n    }    \n    Globals.updateCssVars(store.getState().settings);\n\n    this.state = {\n      showUpdateAlert: false,\n      showRestoreAppSettingsToast: (this.queryParams.settings != null && this.originalAppSettingsStr != null) || false,\n      showToast: false,\n      toastMessage: '',\n    };\n\n    serviceWorkCallbacks.onUpdate = (registration: ServiceWorkerRegistration) => {\n      this.registrationNew = registration;\n      this.setState({ showUpdateAlert: true });\n    };\n\n    serviceWorkCallbacks.onSuccess = (registration: ServiceWorkerRegistration) => {\n    };\n\n    // Preload speechSynthesis.\n    if (typeof speechSynthesis !== 'undefined') {\n      speechSynthesis.getVoices();\n      speechSynthesis.cancel();\n    }\n\n    // Enable screen wake lock.\n    if ((navigator as any).wakeLock) {\n      this.wakeLockScreen();\n      document.addEventListener(\"visibilitychange\", async () => {\n        if (document.visibilityState === 'visible') {\n          this.wakeLockScreen();\n        } else {\n          this.wakeLockScreenRelease()\n        }\n      });\n    }\n  }\n\n  restoreAppSettings() {\n    localStorage.setItem(Globals.storeFile, this.originalAppSettingsStr!);\n    this.props.dispatch({ type: 'LOAD_SETTINGS' });\n  }\n\n  // Prevent device from sleeping.\n  wakeLock: any;\n  async wakeLockScreen() {\n    try {\n      const wakeLock = (navigator as any).wakeLock;\n      if (wakeLock != null) {\n        this.wakeLock = await wakeLock.request('screen');\n        console.log('Screen wake lock is requested.');\n      } else {\n        console.error('navigator.wakeLock is undefined.');\n      }\n    } catch (err: any) {\n      // the wake lock request fails - usually system related, such low as battery\n      console.log(`${err.name}, ${err.message}`);\n      console.log(new Error().stack);\n    }\n  }\n\n  async wakeLockScreenRelease() {\n    if (this.wakeLock != null) {\n      await this.wakeLock.release();\n      this.wakeLock = null;\n      console.log('Screen wake lock is released.');\n    }\n  }\n\n  routeByQueryString() {\n    // This app uses client side routing. \n    // Without the first loading of this app,\n    // any client side route becomes a server side route!\n    // These invalid server side routings cause 404 errors.\n    // To workaround these errors, we can use GitHub 404.html redirection\n    // to pass the client side routes to this app by using query string.\n    // After this app loads, it can use the query string to correctly redirect to\n    // a client side route!\n    console.log(window.location.search);\n    const routeMatches = /route=([^&]*)/.exec(window.location.search);\n    const queryMatches = /query=([^&]*)/.exec(window.location.search);\n    if (routeMatches !== null) {\n      const route = decodeURIComponent(routeMatches[1]);\n\n      let query = ''\n      if (queryMatches !== null) {\n        query = decodeURIComponent(queryMatches[1]);\n      }\n      return <Redirect to={route + query} />;\n    } else if (window.location.pathname === `${Globals.pwaUrl}/` || window.location.pathname === `${Globals.pwaUrl}`) {\n      return <Redirect to={`${Globals.pwaUrl}/wheel`} />;\n    }\n  }\n\n  componentDidMount() {\n    if (this.queryParams.title) {\n      const title = this.queryParams.title;\n      const selections = (this.queryParams.s || this.queryParams.sel) as string[];\n      const newDecisionIndex = this.props.settings.decisions.length;\n      this.props.dispatch({\n        type: \"ADD_DECISION\",\n        decision: new Decision(uuidv4(), title, selections.map(v => new SelectionItem({ title: v }))),\n      });\n\n      this.props.dispatch({\n        type: \"SET_KEY_VAL\",\n        key: 'selectedDecision',\n        val: newDecisionIndex,\n      });\n\n      this.setState({ showToast: true, toastMessage: `\"${title}\"輪盤已由網址新增！` })\n    }\n  }\n\n  render() {\n    return (\n      <IonApp>\n        <IonReactRouter>\n          <IonTabs>\n            <IonRouterOutlet animated={false}>\n              {/* The following route is for backward compatibility. */}\n              <Route path={`${Globals.pwaUrl}/wheel`} render={(props: any) => <WheelPage {...props} />} exact={true} />\n              <Route path={`${Globals.pwaUrl}/settings`} render={(props: any) => <SettingsPage {...props} />} />\n              <Route path={`${Globals.pwaUrl}/`} render={() => { return this.routeByQueryString(); }} exact={true} />\n            </IonRouterOutlet>\n            <IonTabBar slot=\"bottom\">\n              <IonTabButton tab=\"wheel\" href={`${Globals.pwaUrl}/wheel`}>\n                <IonIcon icon={pieChart} />\n              </IonTabButton>\n              <IonTabButton tab=\"settings\" href={`${Globals.pwaUrl}/settings`}>\n                <IonIcon icon={settings} />\n              </IonTabButton>\n            </IonTabBar>\n          </IonTabs>\n        </IonReactRouter>\n        <IonAlert\n          cssClass='uiFont'\n          isOpen={this.state.showUpdateAlert}\n          backdropDismiss={false}\n          onDidPresent={(ev) => {\n            // Run SKIP_WAITING at onDidPresent event to avoid a race condition of\n            // an old page fetching old JS chunks with a new service worker!\n            this.registrationNew?.installing?.postMessage({ type: 'SKIP_WAITING' });\n            this.registrationNew?.waiting?.postMessage({ type: 'SKIP_WAITING' });\n          }}\n          header={'App 已更新，請重啟!'}\n          buttons={[\n            {\n              text: '關閉',\n              cssClass: 'primary uiFont',\n              handler: (value) => {\n                this.setState({\n                  showUpdateAlert: false,\n                });\n              },\n            }\n          ]}\n        />\n\n        <ShareTextModal\n          {...{\n            text: this.props.shareTextModal?.text,\n            showModal: this.props.shareTextModal?.show || false,\n            finish: () => {\n              store.dispatch({\n                type: \"TMP_SET_KEY_VAL\",\n                key: 'shareTextModal',\n                val: { show: false },\n              });\n            }, ...this.props\n          }}\n        />\n\n        <IonToast\n          cssClass='uiFont'\n          isOpen={this.state.showRestoreAppSettingsToast}\n          onDidDismiss={() => this.setState({ showRestoreAppSettingsToast: false })}\n          message={`已套用app連結中的設定，是否還原設定？`}\n          buttons={[\n            {\n              text: '取消',\n              role: 'cancel',\n              handler: () => this.setState({ showRestoreAppSettingsToast: false })\n            },\n            {\n              text: '還原',\n              handler: () => this.restoreAppSettings(),\n            },\n          ]}\n        />\n\n        <IonToast\n          cssClass='uiFont'\n          isOpen={this.state.showToast}\n          onDidDismiss={() => this.setState({ showToast: false })}\n          message={this.state.toastMessage}\n          duration={2000}\n        />\n      </IonApp>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    shareTextModal: state.tmpSettings.shareTextModal,\n    settings: state.settings,\n    tmpSettings: state.tmpSettings,\n  }\n};\n\nconst AppOrig = connect(\n  mapStateToProps,\n)(_AppOrig);\n\n\nconst App = withRouter(_App);\n\nexport default App;\n","import { /*applyMiddleware,*/ createStore, Store } from \"redux\";\n\n//import { logger } from \"redux-logger\"\n//import thunk from \"redux-thunk\"\n//import promise from \"redux-promise-middleware\"\n\nimport reducer from \"./reducers\";\nimport Globals from \"../Globals\";\n\n//const middleware = applyMiddleware(promise(), thunk, logger)\n\nvar savedStore: Store;\n\nexport default function getSavedStore() {\n    var savedSettingsStr = localStorage.getItem(Globals.storeFile);\n    if (savedSettingsStr != null) {\n        savedStore = createStore(reducer, JSON.parse(savedSettingsStr));//, middleware)\n    }\n    else {\n        savedStore = createStore(reducer);//, middleware)\n    }\n\n    return savedStore;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      /*\n      if(registration.waiting) {\n        const reg = registration.waiting;\n        reg.postMessage({ type: 'SKIP_WAITING' });\n        alert('Skip waiting.');\n      }*/\n\n      registration.onupdatefound = () => {\n        //alert('onupdatefound.');\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          console.log(`installingWorker stage changed: ${installingWorker.state}`);\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from \"react-router-dom\";\nimport App, {serviceWorkCallbacks} from './App';\nimport Globals from './Globals';\nimport * as serviceWorker from './serviceWorkerRegistration';\n\n// Enable at the very start for logging most messages.\nGlobals.enableAppLog();\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register({\n    onSuccess: (registration: ServiceWorkerRegistration) => { console.log('Precache app loaded!'); serviceWorkCallbacks.onSuccess(registration); },\n    onUpdate: (registration: ServiceWorkerRegistration) => { console.log('Found app updated!'); serviceWorkCallbacks.onUpdate(registration); },\n});\n","export class SelectionItem {\n    title: string = '';\n\n    constructor(obj: any) {\n        this.title = obj.title;\n    }\n}\n","import { SelectionItem } from \"./SelectionItem\";\n\nexport class Decision {\n    uuid: string = '';\n    title: string = '';\n    fontSize = 24;\n\n    selections: SelectionItem[] = [];\n\n    constructor(uuid: string, title: string, selections: SelectionItem[] = []) {\n        this.uuid = uuid;\n        this.title = title;\n        this.selections = selections;\n    }\n}\n"],"sourceRoot":""}